<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
    <title>LIFF Get Starter</title>
    <link rel="stylesheet" href="css/style.css" media="all">
</head>
<body>

    <p id="os"><b>OS:</b> </p>
    <p id="language"><b>Language:</b> </p>
    <p id="version"><b>Version:</b> </p>
    <p id="lineVersion"><b>Version:</b> </p>
    <p id="accessToken"><b>AccessToken:</b> </p>
    <p id="isInClient"><b>isInClient:</b> </p>

    <img id="pictureUrl">
    <p id="userId"><b>userId:</b> </p>
    <p id="displayName"><b>displayName:</b> </p>
    <p id="statusMessage"><b>statusMessage:</b> </p>

    <button id="btnMsg">Send Message</button>
    <button id="btnScanCode">Scan Code</button>
    <button id="btnClose">Close</button>
    <button id="btnLogOut">Log Out</button>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>

        // Create function getEnvironment()
        function getEnvironment(){
            document.getElementById("os").append(liff.getOS())
            document.getElementById("language").append(liff.getLanguage())
            document.getElementById("version").append(liff.getVersion())
            document.getElementById("lineVersion").append(liff.getLineVersion())
            document.getElementById("accessToken").append(liff.getAccessToken())
            document.getElementById("isInClient").append(liff.isInClient())

            if(liff.isInClient()){ // ถ้า return เป็น true นั่นคือเปิดใน application line
                document.getElementById("btnLogOut").style.display = "none" // ซ่อนปุ่ม Log Out
            }else{ // ถ้าเปิดภายนอก applicaton line หรือเปิด external browser
                document.getElementById("btnMsg").style.display = "none" // ซ่อนปุ่ม Send Message
                document.getElementById("btnScanCode").style.display = "none" // ซ่อนปุ่ม Scan Code
                document.getElementById("btnClose").style.display = "none" // ซ่อนปุ่ม Close
            }
        }

        // Create function getUserProfile()
        async function getUserProfile() {
            const profile = await liff.getProfile()
            profile.getElementById("pictureUrl").src = profile.pictureUrl
            profile.getElementById("userId").append(profile.userId)
            profile.getElementById("displayName").append(profile.displayName)
            profile.getElementById("statusMessage").append(profile.statusMessage)

        }
        
        // Create async main() function
        async function main(){
            // alert("LINE LIFF Starter")
            await liff.init({ liffId: "1656584914-wRLJmRJR" })
            getEnvironment()
            getUserProfile()
        }

        // Call main() function
        main()

    </script>
</body>
</html>
